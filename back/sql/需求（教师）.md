## 给普通教师增删权限（园长）

POST  /teacher/changeRole

> Body 请求参数

```json
{
  "teacher_id": 1,
  "is_set": 1,          // 是否给与权限，1代表给与，0代表取消
  "manager_id": 2       // 园长的id
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```

> 400 Response（所有的400都为这个格式，不再重复）

```json
{
  "code": 400,
  "message": "错误信息",
  "data": []
}
```







## 注册学生（管理级教师/园长）

POST  /user/registerChild

> Body 请求参数

```json
{
  "child_name": "zhangsan",
  "gender": "男",
  "nation": "汉族",
  "birth_date": "2019-05-01",
  "class_id": 4,                   // 如果是体验班，可以默认传值为1
  "is_experience": 1,              // 0:正常班级，1:体验班（体验班class_id=1）
  "manager_id": 2                  // 管理级教师/园长的 id
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 移除学生（管理级教师/园长）

POST  /user/deleteChild

> Body 请求参数

```json
{
  "child_id": 1,
  "manager_id": 3      // 管理级教师/园长的 id
}
```

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 注册教师（园长）

POST  /user/registerTeacher

> Body 请求参数

```json
{
	"teacher_name": "zhangsan",
	"phone": 15112345678,
	"pwd": "123",
	"role": "",
    "manager_id": 1      // 园长的 id
}
```

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 移除教师（园长）

POST  /user/deleteTeacher

> Body 请求参数

```json
{
  "teacher_id": 1,     // 教师id
  "manager_id": 3      // 园长的id
}
```

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 用户登录

POST   /user/login

> Body 请求参数

```json
{
  "username": "zhangsan",
  "password": "123456"
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "user_id": 1,
    "username": "zhangsan",
    "role": "teacher",
    "teacher_role": "管理级教师",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```







## 给学生分配班级（园长）

POST   /teacher/changeChildClass

> Body 请求参数

```json
{
  "child_id": 1,
  "class_id": 2,
  "manager_id": 3      // 园长的id
}
```

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 给老师分配班级（园长）

POST   /teacher/changeTeacherClass

> Body 请求参数

```json
{
  "teacher_id": 1,
  "class_id": [(2,0), (3,0), ...],     // 老师所带的全部班级的信息(class_id, is_headTeacher) 
  "manager_id": 4                      // 园长的id
}
```

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 更改班级名称（园长）

POST   /teacher/changeClassName

> Body 请求参数

```json
{
  "class_id": 1,
  "class_name": "力行1班",
  "manager_id": 3            // 园长的id
}
```

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```







## 获取教师所有的授课班级

GET   /teacher/getClass

> Query 请求参数

```json
{
  "teacher_id": 1
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "class_id": 1,
      "class_name": "一年级1班"
    },
    {
      "class_id": 2,
      "class_name": "一年级2班"
    }
  ]
}
```







## 获取班级所有儿童信息

GET   /teacher/getClassChild

> Query 请求参数

```json
{
  "class_id": 1
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "child_id": 1,
      "child_name": "张三"
    },
    {
      "child_id": 2,
      "child_name": "李四"
    }
  ]
}
```







## POST   开始测试

POST   /teacher/test

> 请求参数

```json
{
  "child_id": 1
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "score": [3, 2, 3, 1, 2],        // 上次测试得到的5个项目的得分
    "month_age": 3                   // 当前实际月龄
  }
}
```







## GET   获取 某个测试项目 某个月龄段 的题目

GET   /teacher/getQuiz

> 请求参数

```json
{
  "project": "gross_motor",
  "month_age": 12,    
  "is_forward": 1      // 1:向更高月龄测试，0:测当前月龄，-1:向更低月龄测试
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
   "month_age": 15,
   "quiz":[
        {
          "quiz_id": 21,
          "quiz_name": "俯卧抬头",
          "quiz_method": "让婴儿俯卧，观察其抬头能力",
          "pass_need": "能自主抬头即通过"
        },
        {
          "quiz_id": 22,
          "quiz_name": "独坐能力",
          "quiz_method": "观察婴儿是否能独自坐稳",
          "pass_need": "能独坐不倒即通过"
        }
  ]
}
```









## POST   记录成绩

POST   /teacher/recordScore

> Body 请求参数

```json
{
  "child_id": 1,
  "teacher_id": 1,
  "maxPass_month": [12, 11, 13, 12, 12],  // 五个项目的最大连续通过月份
  "answer_set": [
    // 大运动（只需要返回最大连续通过月份之后的全部测试月份）
    [
        {
          "quiz_id": 1,
          "is_pass": 0,
          "month": 1
        },
        {
          "quiz_id": 2,
          "is_pass": 1,
          "month": 1
        },
        ...
    ],
	// 其他
	...
  ]
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
      "dq_id": 1
  }
}
```









## GET   获取测评报告

GET  /teacher/getPdf

> Body 请求参数

```
{
	"dq_id": 11
}
```



> 返回示例

```
response = make_response(send_file(filepath))
response.headers['Content-Type'] = 'application/pdf'
response.headers['Content-Disposition'] = f'inline; filename={filename}'
return response
```











## GET   推荐游戏

GET   /teacher/recommendGame

> Body 请求参数

```json
{
  "sort": 1,          // 1: 大运动; 2: 精细动作; 3: 语言; 4: 适应能力; 5: 社会行为
  "month_age": 12     // 月龄
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
        'game_name': '小手小腿来做操',
        'game_sort': 1,
        'game_beginTime': 0,
        'game_endTime': 12,
        'game_bg': '',
        'game_prepare': '柔软、舒适的垫子',
        'game_purpose': '1.锻炼身体动作的协调性，感知身体运动。2.建立依附关系。',
        'game_process': '1.让宝宝平躺在柔软、舒适的垫子上。2.告诉宝宝：“我们...',
        'cautions': '1.动作要轻、慢、柔，不要太用力。2.宝宝如果无法放松肢体，需要先协助放松后再互动。'
    },
   	...
  ]
}
```









## 查询儿童所有测试记录

GET   /teacher/getChildTestRecord

> Query 请求参数

```json
{
  "child_id": 1
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "dq_id": 101,
      "date": "2024-05-01 10:30:00",
      "dq": 85
    },
    {
      "dq_id": 102,
      "date": "2024-06-01 09:20:00",
      "dq": 90
    }
  ]
}
```









## 查询单次测试详细结果

GET   /teacher/getTestDetail

> Query 请求参数

```json
{
  "dq_id": 1
}
```



> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
      "baseInfo" : {
          "child_name": "张小明",
          "child_gender": "男",
          "birth_date": "2025-01-01",
          "test_date": "2025-06-28",
          "month_age": 5,    // 实际月龄
          "test_age": 5,     // 主测月龄
          "test_tool": "《0～6岁儿童发育行为评估量表（WS/T 580—2017）》",
          "teacher_name": "张老师"
      },
      "score":{
          "intelligence_age": [4.5, 4.0, 5.5, 7.5, 5.0, 5.3],           // 智龄
          "full": [5, 5, 5, 5, 5, 5],                                   // 满分
          "dq": [90.0, 80.0, 110.0, 150.0, 100.0, 106.0],               // 发育商Dq
          "grade": "中等",                                               // 发育等级
          "pdf_url": "http://127.0.0.1:5000/teacher/getPdf?dq_id=12"    // pdf存放路径
      },
      "detail": [
            // 大运动
            {
              "project": "gross_motor",
              "score": 8,
              "quiz_list": [
                  {
                    "quiz_id": 301,
                    "quiz_name": "站立能力",
                    "quiz_method": "观察婴儿是否能独自站立",
                    "pass_need": "能独自站立不扶物即通过",
                    "is_pass": 1
                  },
                  {
                    "quiz_id": 302,
                    "quiz_name": "行走能力",
                    "quiz_method": "观察婴儿是否能独自行走",
                    "pass_need": "能独自行走几步即通过",
                    "is_pass": 0
                  }
              ]
            },
          	// 精细运动
            {
              "project": "fine_motor",
              "score": 7,
              "quiz_list": [
                  {
                    "quiz_id": 303,
                    "quiz_name": "捏物能力",
                    "quiz_method": "观察婴儿是否能用拇指和食指捏起小物品",
                    "pass_need": "能用拇指和食指捏起小物品即通过",
                    "is_pass": 1
                  }
              ]
            },
            // 其余项目同理
            ...
      ]
  }
}
```

